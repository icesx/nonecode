IRuankao.md
===

## 计算机组成与体系结构（2020-2-13）

### 基础知识

#### 硬件组成

1. 控制器、运算器、主存储器、辅助存储器、输入设备、输出设备
2. 总线：同一时刻，只允许一个部件向总线发送信息，同一时刻允许多个部件从总线上接受相同的信息
3. 

#### 存储系统

##### 基本概念

1. 组成单元Cache、主存、辅助存储

2. 四种存取方式

   1. 顺序存取：
   2. 直接存取
   3. 随机存取
   4. 相连存取：cache采用相连存取，有点向redis

3. 局部性原理

   1. 一较短时间内，程序的执行仅局限于某个部分
   2. 访问的的存储空间也局限于某个区域

4. 随机存储器：RAM、DRAM、SRAM

   | 随机存贮器 | 说明                             |
   | ---------- | -------------------------------- |
   | RAM        | 随机存取存储器                   |
   | DRAM       | 动态：需要刷新                   |
   | SRAM       | 静态：速度更快，电路简单，价格高 |

   

5. 只读存储器：ROM（BIOS）

##### 主存编址方法

字节编址字编址

##### 磁盘

1. 柱面
2. 扇区

##### cache

	1.	命中率
	2.	映射机制
	  	1.	直接杨舍
	  	2.	全相连映射
	  	3.	组相连映射
	3.	替换算法
	  	1.	随机算法
	  	2.	先进先出
	  	3.	近期最少
	4.	写操作
	  	1.	写通
	  	2.	写回
	  	3.	标记法

#### CISC与RISC

| CISC                       | RISC                                        |
| -------------------------- | ------------------------------------------- |
| 指令多，100-250            | 指令少                                      |
| 指令频率悬殊20-80%         |                                             |
| 多种寻址方式5-20           | 寻址方式少3种（寄存器、立即寻址、相对寻址） |
| 变长指令                   | 定长指令                                    |
| 指令对主存单元数据直接处理 |                                             |
| 以微程序控制为主           | 硬布线逻辑控制                              |
|                            |                                             |
|                            |                                             |
|                            |                                             |

[网上资料](https://blog.csdn.net/qyf__123/article/details/100087161)

| CISC                           | RISC                                     |
| ------------------------------ | ---------------------------------------- |
| 以硬件为中心的指令集设计       | 以软件为中心的指令集设计                 |
| 通过硬件实现各类程序指令       | 通过编译器实现简单指令组合，完成复杂指令 |
| 更高效使用内存和寄存器         | 需要更大内存和寄存器、并频繁使用         |
| 可变指令程度、支持复杂指令长度 | 简单定长指令                             |
| 大量指令集                     | 少量指令集                               |
|                                |                                          |
|                                |                                          |



1. 大多数RISC使用cache方案，提高指令速度。
2. RISC硬布线逻辑控制

### 流水线

把一个任务分解为若干顺序执行的子任务，不同子任务由不同的执行机构负责执行，而这些机构可以同时并行工作。在任一时刻，任一任务只占用其中一个执行机构。

1. 流水线周期：任务分为N个阶段，最耗时的那一段为流水线周期（这里可能有考题）

2. 计算流水线执行时间

   **流水线执行时间=第一条执行的执行时间+（n-1）*流水线周期**（n代表需要处理的任务数量）

   > 某计算机系统，一条执行执行需要经历取值2ms、分析4ms、执行1ms三个阶段，现需要执行100条执行，利用流水线技术需要多长时间？
   >
   > 理论上执行时间=2+4+1+（100-1）*4=403
   >
   > 是地上为了简单=4+4+4+（100-1）*4=408

3. 流水线的吞吐率

4. 流水线的加速比

### 一些关键字

#### flynn



#### 冯诺依曼

### 基本知识点

1. cpu不直接访问辅助存储器，智能访问主存

2. 程序的 CPU 执行时间 = 指令数 × CPI × Clock Cycle Time

   CISC优化指令数，RISC优化CPI

## 操作系统（2020-2-13）

### 类型

批处理、分时、实时、网络、分布式、嵌入式、微内核等

### 基本原理

#### 进程管理

1. 并发与并行：

##### 进程的状态

1. 就绪状态：万事俱备，只待cpu
2. 执行状态：单处理机系统中，智能有一个进程处于执行状态
3. 阻塞（等待）状态：等待资源，阻塞状态。

##### 进程状态的变迁

1. 运行->等待
2. 等待->就绪
3. 运行->就绪
4. 就绪->运行

##### 挂起

> 有些操作系统中增加挂起状态，原因有
>
> 1. 环节内存紧张状态，进程切换至外存
> 2. 

##### 进程互斥与同步

互斥是资源竞争关系；同步是进程间协作关系

临界资源：只允许一个进程使用

资源晶振的协调：

1. 空闲让进
2. 忙则等待
3. 有限等待
4. 让权等待

##### PV操作（必考）

信号量：信号量(Semaphore)，有时被称为信号灯，是在[多线程](https://baike.baidu.com/item/多线程/1190404)环境下使用的一种设施，是可以用来保证两个或多个关键代码段不被[并发](https://baike.baidu.com/item/并发/11024806)调用。在进入一个关键代码段之前，线程必须获取一个信号量；一旦该关键代码段完成了，那么该线程必须释放信号量。其它想进入该关键代码段的线程必须等待直到第一个线程释放信号量。为了完成这个过程，需要创建一个信号量VI，然后将Acquire Semaphore VI以及Release Semaphore VI分别放置在每个关键代码段的首末端。确认这些信号量VI引用的是初始创建的信号量。

在操作系统中，信号量S是一整数。S大于或等于零，代表可供并发进程使用的资源实体数；在S小于零时，ISl表示正在等待使用资源实体的进程数。建立一个信号量必须说明此信号量所代表的意义并且赋初值。除赋初值外，信号量仅能通过PV操作来访问

PV操作用于实现进程间同步。

**当信号量为0的时候，表示期望的消息尚未产生；当信号量非0表示期望的消息已经存在；**

用P操作测试消息释放到达；V操作发送消息。

PV操作不可被中断。

P：通过

V：释放

>P操作的主要动作是： 
>
>1. S减1； 
>
>2. 若S减1后仍大于或等于0，则进程继续执行；
>
>3. 若S减1后小于0，则该进程被阻塞后放入等待该信号量的等待队列中，然后转进程调度。 
>
>   
>
>V操作的主要动作是： 
>
>1. S加1； 
>2. 若相加后结果大于0，则进程继续执行； 
>3. 若相加后结果小于或等于0，则从该信号的等待队列中释放一个等待进程，然后再返回原进程继续执行或转进程调度。

S的初值可定义为0、1或其他整数，在系统初始化时确定。从信号量和PV操作的定义可以获得如下推论。 [1] 

推论1：若信号量S为正值，则该值等于在阻塞进程之前对信号量S可施行的P操作数，亦即等于S所代表的实际还可以使用的物理资源数。 [1] 

推论2：若信号量s为负值，则其绝对值等于登记排列在该信号量S等待队列之中的进程个数，亦即恰好等于对信号量S实施P操作而被阻塞并进入信号量S等待队列的进程数。 [1] 

推论3：通常，P操作意味着请求一个资源，V操作意味着释放一个资源。在一定条件下，P操作代表阻塞进程操作，而V操作代表唤醒被阻塞进程的操作。 [1]

##### 前驱图

> 每个节点表示为一个语句、一个程序段或者一个进程，节点间邮箱边表示两个节点之间存在的前驱关系。

1. 直接制约:*同步的进程之间的制约关系？*

   一个操作中的多个步骤之间的制约：取指、分析、执行

2. 间接制约：*互斥的进程之间的制约关系*

   多个操作之间相同操作的制约：取指${_1}$,取指${_2}$,取指${_3}$

##### 进程调度与死锁

###### 进程调度的原因

1. 进程执行完毕
2. 进程自己调用阻塞原语将自己阻塞进入睡眠
3. 执行的进程调用了P原语因资源不足而阻塞，或者调用V原语进入等待
4. 分时系统，一个进程用完一个时间片
5. 其他进程优先级高于执行进程

###### 进程调度算法

1. 先来先服务
2. 优先数调度
3. 轮转发

###### 死锁



#### 存储管理

>

##### 页式存储管理

1. 页面调度算法
   1. 最有算法（OPT）
   2. 随机算法（RAND）
   3. 先进先出算法
   4. 最近最少使用（LRU）

##### 段式存储管理



##### 段页式存储管理

#### 设备管理

1. 



#### 文件管理

##### 文件逻辑结构

1. 无结构的字符流文件
2. 有结构的记录文件
   1. 顺序文件
   2. 索引顺序文件
   3. 索引文件
   4. 直接文件(哈希文件)：

##### 文件物理结构

> 文件存储社保通常划分为大小相同的物理块——分配和传输信息的基本单位。

1. 文件分配策略
   1. 顺序分配：存取速度快，不能动态增长
   2. 链接分配：只适用于顺序访问，不使用随机存取。解决磁盘碎片问题
   3. 索引分配：unix三级索引。使用与顺序存取，又适用于随机存取。增加存储开销。需要访问两次磁盘（加缓存后，可降低一次）

##### 文件存储设备管理

> 文件存储设备管理实质是对空闲快的组织和管理问题

1. 索引法：空闲块对应索引表中的条目
2. 链接法：空闲快用链表关联
3. 位示图法：外存中放位图，记录块使用情况。

##### 树形目录结构



#### 作业管理

> 系统为完成一个用户的计算任务（或一次事物处理）所做的工作总和。

## 数据库系统（2020-2-27）

要求，数据库的设计方法和技术

### 数据库模式与范式

#### 数据库模式

> 啥是个模式？

##### 三级抽象

1. 用户级数据库：对应于外模式，最接近用户的一级数据库（用户视图）。
2. 概念级数据库：对应于概念模式，所有用户视图的最小并集（DBA视图），一个应用只存在一个DBA视图，它把数据库看成整体抽象的表示。
3. 物理级数据库：对应于内模式，描述数据库的实际存储组织，是最接近于物理存储的级，又称为内部视图。

##### 三级模式

1. 概念模式：描述整个数据库中数据库的逻辑结构，描述现实世界中的实体与性质联系。
2. 外模式：描述用户用户看到或者使用的那部分数据的逻辑结构。外莫斯描述组成用户视图的各个记录的组成、相互关系、数据项的特征、数据的安全性和完整性约束条件。
3. 内模式：定义存储记录的类型、存储域的表示以及存储记录的物理顺序
4. 三证关系如下:
   1. 模式是数据库的中心与关键
   2. 内模式依赖于模式，独立于外模式和存储设备
   3. 外模式面型具体的应用，独立于内模式和存储设备
   4. 应用程序依赖于外模式，独立于模式和内模式。

##### 两级独立性

1. 物理独立性：应用与存储在磁盘上的数据库中的数据是独立的。
2. 逻辑独立性：应用与数据库中的逻辑结构是相互独立的，逻辑结构改变时，应用程序不需要改变。

#### 数据模型

> 数据模型是什么？是一种表关系的声明方式，每种模型需要对应的数据库支持，mysql支持关系型模型。***计算机厂商新推出的数据库管理系统几乎都支持关系模型***

分为两大类：

1. 概念数据模型：按照用户观点对数据和信息建模（数据库设计）
2. 基本数据模型（E-R模型）：用实体-联系方法建模，包含四种常用模型
   1. 层次模型：使用树形结构表示实体类型以及实体间的联系。只能表示1：n联系，应用程序编写复杂
   2. 网状模型：
   3. 关系模型：
   4. 面向对象模型：

